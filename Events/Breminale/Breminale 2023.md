[[_TOC_]]


- Breminale-Beginn: Mi, 12.7., nachmittags
- Breminale-Ende: So, 16.7., nachts

## Kommunikation
- Hackmd-Pad: <https://md.darmstadt.ccc.de/rm1y9mmtTsi1G1WimT9pVw>



## Einladung zum Planungstreffen

wollen wir am Mittwoch, 21.6. um 18 Uhr Breminale-Planungstreffen machen?
Ich könnte als Ort den Schwimmverein Bremen von 1910 vorschlagen.
Hier bitte ankreuzen, wer kann: https://nuudel.digitalcourage.de/cQ2jIQ8Gf67shnQH

Vorgeschlagene Agenda

- Menschliches
    - wer macht mit
    - was sind Wünsche und Vorstellungen aller Beteiligten
    - wollen wir jetzt Essen (aka Pizza) organisieren?
- Technisches
    - Vorstellung "Konzept" "Freifunk und 'BierWLAN'"
    - Diskussion Netzstruktur
    - Diskussion Firmware
- Bauwagen
    - Transport Material?
    - Kühlschrank, Deko, Schloss + Schlüssel?
- Sonstiges
    - Inventurtermin Plutex vereinbaren?
    - Flash-Termin vor Breminale vereinbaren?
    - Marketing? Instagram/Mastodon/Presse/Blog?
    

Hier die Pads: 
- <https://md.darmstadt.ccc.de/rm1y9mmtTsi1G1WimT9pVw?edit>

Übersicht verbaute Infrastruktur: 
- <https://md.darmstadt.ccc.de/31CdaPLVRXel-cMlatsfuQ#>

Inventurdaten, Zwischenstand als Excel. noch unvollständig. https://cloud.ffhb.de/index.php/login

https://cloud.ffhb.de/index.php/f/160827

## Abbau-Treffen Sonntag 19 Uhr Bauwagen

Am Sonntag ab 19 Uhr treffen wir uns zur Abbaubesprechung.


## Protokollpad
# Freifunk Bremen: Breminale 2023

## Überblick
- Breminale-Beginn: Mi, 12.7., nachmittags
- Breminale-Ende: So, 16.7., nachts
- Programm: https://breminale-festival.de/
- Wiki-Seite: https://wiki.ffhb.de/Events/Breminale/Breminale%202023
- PMR Funkkanal: 4.2 zeigen alle Geräte an, das lassen wir denn mal so.
- Nuudel bzgl. Messenger-Abstimmung: https://nuudel.digitalcourage.de/N7FhFfQb8LQK81FX
- Messenger: Für den Browser gibt es die anmeldungsfreie Möglichkeit über [WebChat](https://webirc.hackint.org/#ircs://irc.hackint.org/#ffhb_event?nick=Gast_?) beizutreten
    - über XMPP (Jabber) könnt ihr dem Gruppenchat #ffhb_events@irc.hackint.org beitreten.
    - über Matrix ist der Raum unter https://matrix.to/#/#ffhb:hackint.org erreichbar.
    - oder per IRC-Client unter #ffhb_events auf dem Server hackint.org
- **Übersicht verbaute Infrastruktur: https://md.darmstadt.ccc.de/31CdaPLVRXel-cMlatsfuQ#**
- Monitoring https://monitoring.ffhb.de/ffhb/check_mk/login.py?_origtarget=dashboard.py%3Fname%3Dbreminale&_username=guest&_password=guest


## Ursprünglicher Zeitplan
Diese Termine können sich inzwischen geändert haben; schaut mal auf die Mailingliste oder fragt im Chat (s.o.) oder beim Bauwagen vor Ort für die aktuelle Tagesplanung.
- [x] Fr., 23.6.: Inventar von Plutex zu Moritz+Gesche bringen
- [x] (noch kein Termin festgelegt): Inventur machen (bei Moritz+Gesche)
- [x] Fr., 7.7., nachmittags: Bauwagen wird am Deich angeliefert
- [x] Fr., 7.7., abends: Inventar von Moritz+Gesche holen und zum Deich bringen
- [x] Sa., 8.7., 10:00 am Bauwagen: Geräte flashen
- [ ] Bierwagen inspizieren
- [x] Mo., 10.7., 10:00 am Bauwagen: Haupt-Aufbautag!
    - David bringt gegen 13:00 seine Leitern
- Mi., 12.7., nachmittags: offizieller Beginn der Breminale


## Zu Besorgen
- [x] Regal für den Bauwagen!
- [x] Kühlschrank
    - mortzu?
    - Louis?
- [x] Fahrradschloss mit langer Kette (oder sowas), um die Leitern nachts zu sichern
- [x] Müllsäcke
- [x] Telefon für den Bauwagen?
    - [x] und SIM-Karte? (bringt Jan-Eric am Samstag mit)
- [x] Stühle (Klappstühle, oder stapelbar)? Von Kleinanzeigen?
- [x] Bierzelt-Garnitur (Tisch, Bänke)
- Bauwagen-Deko (bunte Lichter etc.)


## TODO-Liste (unsortiert)
- [x] Inventur machen (wo?: Inventory.ffhb.de? 12.7. Login geht)
- [x] Blogpost veröffentlichen: Louis hat was geschrieben; sieht gut aus!
- [x] Bauwagen entgegennehmen
- [x] Glasfaser entgegennehmen
- [x] Kühlschrank zum Deich bringen
- [x] Material zum Deich bringen
- [x] Schloss am Bauwagen montieren
- [x] Baborouter konfigurieren (mortzu)
- [x] Firmware flashen
- [x] Teilung "Spaßstrom" und "Freifunk professionell"
- [x] Mast basteln (für die Nanobeams am Bauwagen, die auf das Gelände strahlen)
- [x] Leitern entgegennehmen (von David)
- [x] Baborouter aufbauen
- [x] Bierwageninspektion:
    - wie können wir dort Router und Nanobeams anbauen?
    - wie kommen wir dort am besten an Strom? Idee: 3 Steckdose mitnehmen.
    - können wir einfach Archer C7 in den Bierwagen aufbauen (ohne Kiste drumherum)?
- [x] AC-Mesh von Leo: flashen und zurückflashen an einem Gerät ausprobieren
- [ ] Outdoor-Boxen zusammenstellen
- [ ] Outdoor-Boxen aufbauen
    - Stichstrecken zum Deich
    - Stichstrecken nicht zum Wasser (weil die Leute da eher weitergehen und nicht lange im Bereich eines Routers bleiben)
    - an den Klos
    - eher nicht in große Zelte
    - Idee: AC7 ohne OB direkt aufbauen (weil wir vmtl. nicht genug OBs haben)
        - z.B. in nicht-Essens-Ständen
        - z.B. in Musik-Zelten beim Mischpult oder so an Streben angestrapst
- [ ] Getränke besorgen (Mate, Bier?)
- [ ] AC Mesh aufhängen
- [ ] Nanobeams verteilen
    - [ ] am Laternenpfahl neben der Schleuse
    - Mast unten vor dem Bauwagen?
    - Bierwagen
    - Masterknotenpunkte?
- [x] Louis kümmert sich um Nanobeams
    - Corny
    - Plutex (mortzu)
    - Hamburg
- [x] SSH-Key anlegen
- [x] Beleuchtung/Deko
    - Louis organisiert Lichterkette/WLAN-Schild
- [x] Olli/FsH besorgt Bluetooth-Box
- [x] Leo organisiert Regal
- [x] Louis organisiert Bierzelt-Garnitur von Breminale-Orga
- [x] Funkgeräte laden/prüfen
  - [x] Kanal 4.2 vergeben 
- [x] Messenger oder sowas auswählen
    - -> wir nehmen jetzt wieder den #ffhb_events -IRC-Kanal
    - [Webchat](https://webirc.hackint.org/#ircs://irc.hackint.org/#ffhb?nick=Gast_?)
    - <irc://irc.hackint.org/ffhb>
    - über Jabber/XMPP: <xmpp:#ffhb@irc.hackint.org>
    - [über Matrix/Element](https://matrix.to/#/#ffhb:hackint.org)
- [ ] Fahrradstations-Nanobeam am Güterbahnhof abbauen
- [x] wann/wo gibt es Badges?
- [x] Leiter besorgen (von Plutex?)
    - -> ist für Montag geplant
- [ ] Knotenkarte
    - BLOCKED: "LiveInventur"
    - ohne gluon / respondd wird es keine:
        - https://map.ffhb.de/ geben:
            - keine bridge / sehr umständlich
            - daher wsl. einfach nur Grafana-Map
        - client-zahlen können nicht mehr router / region / ort gesehen werden:
            - Vorschlag: [prometheus-node-exporter-lua](https://www.cloudrocket.at/posts/monitor-openwrt-nodes-with-prometheus/)
    - Grafana Offiziell:
        - https://grafana.ffhb.de/d/cbc5610f-5387-4a92-af11-be2bf53e1f3e/breminale-2023?orgId=1&refresh=5s&var-DS_PROMETHEUS=Breminale2023-genoffhb
        - Hat eine Karte mittels labels an ping metrik
    - Grafana Vorort
        - https://events.ffhb.de
        - Login: admin Password: prom-operator
        - Prometheus: https://mon.events.ffhb.de
    - [x] Alerts
        - Karma-Dashboard: http://alerts.events.ffhb.de/?q=%40state%3Dactive
        - Alertmanager: https://alertmanager.events.ffhb.de


## Weitere Notizen

- Abbau: So. (16.7.) spät abends
    - wir können den Abbau diesmal nicht so früh beginnen wie im letzten Jahr, weil die Bierwagen das Netz ja noch brauchen
    - wir können das Material am So. Abend noch recht spät zu Plutex bringen
    - wann muss der Bauwagen übergeben werden? (evtl. als Zwischenlager nutzen)
    - 

## Kanalverteilung
- sollte per Ansible ausgerollt werden
- wir wollen diese Kanäle verwenden:
    - 2.4GHz: 1, 6, 11
    - 5GHz: 36, 40, 44, 48
        - die DFS-Kanäle wollen wir nicht nehmen
        - die nicht-DFS-Kanäle ab 149 erlauben nur 13 dBm (statt 23 dBm), deshalb wollen wir die auch nicht nehmen



# Router Flashen

Wir flashen die Standard-OpenWRT-Firmware auf die Router und spielen dann eine Config ein, damit die Router in unser Netz passen. Das geht so:

* Failsafe-Mode erreichen (hier: für Archer C7 und WDR-3600 und WDR-4300):
    * (Hinweis: das geht nur, wenn auf dem Router schon OpenWRT oder Gluon drauf ist!)
    * (eine ausführlichere Anleitung steht unter <https://openwrt.org/docs/guide-user/troubleshooting/failsafe_and_factory_reset#entering_failsafe_mode>)
    * Router ausschalten
    * Router einschalten
    * Power-LED sollte jetzt leuchten
    * warten, bis die Stern-LED (neben Power-LED) blinkt
    * Reset-Knopf drücken (gedrückt halten), bis die Stern-LED schneller blinkt (dann sofort loslassen, sonst geht der normale Bootvorgang weiter)
* der Router ist jetzt im Failsafe-Mode
* du musst jetzt auf deinem Laptop eine statische IP konfigurieren (IP: 192.168.1.2; Netzmaske: 255.255.255.0; Gateway, Routen und DNS können leer bleiben)
* jetzt deinen Laptop per LAN-Kabel mit einem der gelben (!) Ports am Router verbinden
* der Router ist jetzt per SSH erreichbar unter 192.168.1.1: `ssh root@192.168.1.1` (kein Passwort)
    * falls nach "Key akzeptieren?" gefragt wird: `yes`
    * falls die Warnung kommt "WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED": den alten Key per `ssh-keygen -f "$HOME/.ssh/known_hosts" -R "192.168.1.1"` löschen, und dann SSH neu verbinden
    * falls es eine Meldung gibt bzgl. "unable to negotiate" und so, dann diesen Befehl verwenden: `ssh -o MACs=hmac-sha1 -o HostKeyAlgorithms=ssh-rsa root@192.168.1.1`
* dann kannst du die SSH-Verbindung erstmal wieder trennen (mit `exit`)

Firmware-Images liegen unter:
* AC Mesh
<https://downloads.openwrt.org/releases/22.03.5/targets/ath79/generic/openwrt-22.03.5-ath79-generic-ubnt_unifiac-mesh-squashfs-sysupgrade.bin>

* Archer C7: <https://downloads.openwrt.org/releases/22.03.5/targets/ath79/generic/openwrt-22.03.5-ath79-generic-tplink_archer-c7-v2-squashfs-sysupgrade.bin>

* WDR 3600: <https://downloads.openwrt.org/releases/22.03.5/targets/ath79/generic/openwrt-22.03.5-ath79-generic-tplink_tl-wdr3600-v1-squashfs-sysupgrade.bin>

* WDR 4300: <https://downloads.openwrt.org/releases/22.03.5/targets/ath79/generic/openwrt-22.03.5-ath79-generic-tplink_tl-wdr4300-v1-squashfs-sysupgrade.bin>

* OpenWRT-Firmware runterladen und erstmal auf dem Laptop speichern
    * Achtung: es gibt die WDRs in verschiedenen Varianten (3600 und 4300). Achte drauf, die richtige Firmware zu verwenden!

* OpenWRT-FW flashen
    * per SCP das Image auf den Router kopieren:
        * für AC7: `scp -O -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o MACs=hmac-sha1 -o HostKeyAlgorithms=ssh-rsa openwrt-22.03.5-ath79-generic-tplink_archer-c7-v2-squashfs-sysupgrade.bin root@192.168.1.1:/tmp/`
        * für WDR3600: `scp -O -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o MACs=hmac-sha1 -o HostKeyAlgorithms=ssh-rsa openwrt-22.03.5-ath79-generic-tplink_tl-wdr3600-v1-squashfs-sysupgrade.bin root@192.168.1.1:/tmp/`
        * * für WDR4300: `scp -O -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o MACs=hmac-sha1 -o HostKeyAlgorithms=ssh-rsa openwrt-22.03.5-ath79-generic-tplink_tl-wdr4300-v1-squashfs-sysupgrade.bin root@192.168.1.1:/tmp/`
    * dann wieder per SSH zum Router verbinden (`ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o MACs=hmac-sha1 -o HostKeyAlgorithms=ssh-rsa root@192.168.1.1`)
    * dann in der SSH-Shell die Firmware flashen mit: `sysupgrade -n /tmp/openwrt-22.03.5-*-sysupgrade.bin`
        * sobald der Befehl gestartet wurde, wird die SSH-Verbindung getrennt (das ist OK)
    * WÄHREND DAS FLASHEN LÄUFT, NICHT DEN ROUTER VOM STROM TRENNEN!
    * der Flash-Vorgang dauert evtl. mehrere Minuten
    * beim Flashen blinkt die Stern-LED; wenn die nicht mehr blinkt, ist die neue Firmware fertig geflasht
* der Router rebootet dann automatisch
* nach dem Reboot: über <http://192.168.1.1> das Webinterface öffnen
    * wenn nach dem Passwort gefragt wird: User ist "root", Password muss leer bleiben
* besorg dir die Datei mit der neuen Router-Konfiguration von Oliver oder mortzu (die Datei ist nicht öffentlich, weil da Passwörter drin stehen)
    * achte wieder drauf, die richtige Datei für dein Routermodell zu nehmen (AC7, WDR-3600, ...)
* dann auf Menü -> System -> "Backup/Flash Firmware", und dann unter "Restore" -> "Upload archive" die Config-Datei (z.B. backup-OpenWrt-2023-04-27.tar.gz) auswählen mit mit "Upload"
    * bei der Frage "Apply Backup" auf "Continue" klicken
* die Config wird jetzt eingespielt
    * dabei blinkt die Stern-LED erst schnell, dann langsam, und irgendwann blinken die ganzen anderen LEDs wieder normal
* jetzt ist der Router fertig eingerichtet. Leg das Gerät in die Kiste, in der die fertigen Geräte gesammelt werden!
    * die fertig eingerichteten Geräte kannst du nicht normal per Netzwerk erreichen – nicht wundern :-)


Hinweis:
* fertige Geräte suchen sich eine Adresse über DHCP (über VLAN 100!), über einen beliebigen LAN-Port
* die Adresse wird dann im Bereich 10.100.13.* sein, und wird nur im Mgmt-Netz erreichbar sein (also SSID `mgmt.ffhb.de`)

# Pullover
- Oliver 
- Moritz 
- Gesche 
- Jan-Eric 
- FsH 
- FrankH
- Leo 
- Klee 
- Liz 
- Heye
- Geno

Noch über: 1xM


## Hardwarepad

# Infrastruktur

## Boxen:
#### B0001 
- Steht an der Radio Bremen Bühne im Zelt
- Hängt an Nanobeam A85B
- Archer C7, 01EC (N00041), 10.100.13.223
- PoE zur Nanobeam
- an der Kiste hängt per PoE eine AC-Mesh N0098 (9B7B)
- an der Kiste hängt per PoE eine AC-Mesh (D581)

#### B0002
- steht bei den Brettern (hinten im Verkaufsbereich)
- hängt an Box B0009
- Archer C7, 05A0 (N0059)
- daran hängt per PoE eine AC-Mesh (D58C)

#### B0006
- steht beim Toilettencontainer
- Archer C7, 51F9 (N0056), 10.100.13.169
- 1x PoE-Injektor 24V 0,5A
- hängt an PoE-Switch Bauwagen

#### B0007
- steht hinter der Radio-Bremen-Bühne (an der Bühnen-Ecke, unterm Stromkasten)
- hängt an Box B0001
- Archer C7, 127B (N0045) 10.100.13.168
- daran hängt eine AC-Mesh (D6D2, N0125)

#### B0008
- steht am Stromkasten "C10" bei der Treppe beim Kunsttunnel
- Archer C7 6A3E (N?), 10.100.13.197
- hängt an der Nanobeam 287B

#### B0009
- steht bei den Brettern
- Archer C7, C174 (N0060), 10.100.13.172
- 1x PoE-Injektor 24V 0,5A
- hängt an Nanobeam 0708

#### B0010
- Backstagebereich Flut
- Archer C7, DD25 (N0046), 10.100.13.201
- 1x PoE
- NanoBeam 24AE
- daran hängt per PoE eine AC-Mesh (7863)

#### B0011
- LWLcom Mast
- Archer C7, F075 (N0047), 10.100.13.206
- hängt an NanoBeam 0FF9, 10.100.0.21
- 2x AC Mesh
    - D505, 10.100.13.187
    - D62A, 10.100.13.188

#### B0012
- steht am Elektrikercontainer
- Archer C7, AA14, 10.100.13.170
- 1x PoE-Injektor 24V 0,5A
- Hängt an Nanobeam 284C (10.100.0.17)
- daran hängt per PoE eine AC-Mesh 7715 (N0103) 

#### B0015
- steht im Schleuse Backstage Gastro
- Archer C7, CAA2 (N0069), 10.100.13.214
- 1x PoE-Injektor 24V 0,5A
- Hängt an B0014

#### B0019
- steht bei Radio Bremen im Turm (hinter der Cosmo-Bühne); "radio-bremen-turm"
- grüne Box
- Archer C7 845A (N0054), 10.100.13.164
- hängt an Box B0007

#### B0024
- Flut hinter der Bühne
- grüne Box
- Archer C7, 0494 (N0042), 10.100.13.185
- AC Mesh, 7ADE (N00??), 10.100.13.196


#### B0025
- steht im Backstagebereich Schleuse
- Archer C7, D40C (N0062), 10.100.13.222
- Archer C7, 41DA (N0063), 10.100.13.???
- 2x PoE-Injektor
- Hängt an Nanobeam 2484
- vielleicht: AC Mesh 7763, 10.100.13.186

#### B0026
- steht auf Pappinale Container
- hängt an NanoBeam 3D41
- Archer C7, 5B09 (N0074), 10.100.13.167
- AC Mesh, 82F1 (hat keine Inventar-Nummer), 10.100.13.182

#### B0028
- steht am Wasser, zwischen Bauwagen und Flut
- hängt an Nanobeam 922C
- Archer C7, DAC3 (N0034), 10.100.13.158
- AC Mesh, 7BF2, 10.100.13.157

#### B0029
- steht bei Muchas Mas (in einem Verkaufswagen, im Strom-Schrank)
- Archer C7, EE4B (N0031), 10.100.13.189
- daran hängt eine Nanobeam (da:82) 10.100.0.20
- an der Nanobeam hängt per PoE-Passthrough eine AC-Mesh (7600)
  - 10.100.13.190

#### B0030
- bei Studio Illegale
- Archer C7, 9255 (N0064) (10.100.13.171)
- 1x PoE
- an Nanobeam 21EC

#### B0038
- steht an Pappinale Bühne (anstatt Backstage)
- Archer C7, 266E (N0035), 10.100.13.180
- hängt an B0026 (Pappinale Container)
- AC Mesh, D5AA (SV Bremen 10), 10.100.13.179
    - hängt im Pappinale Backstagebereich
- AC Mesh, D3EE (N00??), 10.100.13.178
    - hängt an Pappinale Mast

#### BXXXX
- auf dem Dach vom Bauwagen
- Archer C7, CF3A (N0048), 10.100.13.176


## Nanobeams:
- 74f0 (N0126) hängt am Bauwagenmast Richtung Flut https://10.100.0.11
- A661 hängt am Bauwagenmast Richtung Radio Bremen https://10.100.0.18
- C4F9 hängt am Bauwagenmast Richtung Schleuse https://10.100.0.10
- A85B hängt im Zelt oben bei Radio Bremen https://10.100.0.26
- 2484 hängt im Backstagebereich Schleuse https://10.100.0.15
    - daran hängt eine AC-Mesh (77C2)
- 0708 hängt an den Brettern Richtung Bauwagen https://10.100.0.14
- 284C hängt an Elektrikercontainer zwischen Schleuse und Bauwagen https://10.100.0.17
- 21EC hängt an Studio Illegale https://10.100.0.16
- 24AE hängt im Backstage Bereich Flut https://10.100.0.12
- A757 hängt im Backstage Schleuse, als Weiterleitung Richtung Bretter https://10.100.0.27
- 287B hängt an der Laterne zwischen Studio Illegale und Toilettencontainer, oben an der Treppe https://10.100.0.13
    - daran hängt eine AC-Mesh (77D4) (direkt am selben Laternenmast)
- da82 steht bei Muchas Mas https://10.100.0.20
    - ist verbunden mit A757 (Backstage Schleuse)
    - daran hängt: AC-Mesh 7600
- 3D41 hängt an Pappinale Container https://10.100.0.19
- 0FF9 hängt beim LWLcom-Turm https://10.100.0.21
- (WIP) 7C78 wird stehen zwischen Bauwagen und Flut https://10.100.0.22
    - hat leider nur einen Port
- (WIP) 922C wird stehen zwischen Bauwagen und Flut https://10.100.0.23

## AC Mesh
- D548 hängt am Bürocontainer 10.100.13.225
- D3ED hängt 3 Bäume neben dem Bauwagen 10.100.13.227
- 77C2 Backstagebereich Schleuse an Nanobeam 10.100.13.220
- 7763 (N0106) Backstagebereich Schleuse am anderen Ende 10.100.13.???
- 8AF0 Backstage Schleuse Gastroseite 10.100.13.213
- D58C an 50m Kabel hinter Bretter Richtung mast
- D2C6 an Nanobeam 21EC bei Studio Illegale 10.100.13.202
- 7863 (N0105) hängt im Backstage Bereich Flut 10.100.13.200
- 9B7B hängt neben der Radio-Bremen-Bühne (oben an einem Container) 10.100.13.198
- 77D4 hängt am Laternenmast hinten bei der Treppe am Kunsttunnel 10.100.13.194
- 7715 (N0103) hängt beim Elektrikercontainer 10.100.13.199
- 7600 (Eigentum Segelverein) hängt an Nanobeam DA82 bei Muchas Mas
- D6D2 (N0125) hängt an Radio-Bremen-Bühne (an der Seite Richtung Schlachte) 10.100.13.192
- D581 hängt im Backstage Radio-Bremen-Bühne, an der ganz östlichen Ecke vom Zaun (um Bierwagen B9 zu versorgen) 10.100.13.191


- Boje (Schleuse vorne an der Bühne):
    - 7C9E (1)
    - 83C7 (2)
    - 7B2F (3)
    

## Sonstiges
- Archer C7 7735 (N0049) im Bauwagen 10.100.13.218



